<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<script>
		var fields = {
			form1: {
				attr: {
					lang: 'fr',
					langs: ['fr', 'en']
				},
				desc: [{
						type: 'title',
						title: 'Hello',
						icon: 'fas fa-skull-crossbones',
						help: 'Help Please verify your info before',
					},
					{
						type: 'alert',
						color: 'danger',
						message: "ceci est un message d'alerte",
						icon: 'fas fa-exclamation-triangle',
						tip: 'Tip Please verify your info before',
						help: 'Help Please verify your info before',
					},
					{
						id: 'i98',
						type: 'textarea',
						rows: 8,
						value: 'Eheh l\'ami quoi de neuf c\'est long tout ce tete sinon <h2>ca va? la fa</h2>mille? les amis? la santé? bonsoir enfin au revoir anticonstitutionnelement ;) bisous',
						label: 'Lettre pour chirac',
						multilang: true,
                        required:true,
						icon: 'fas fa-running',
						tip: 'Il faut bien écrire vous avez affaire avec un président',
						help: 'Help Please verify your info before',
						buttons: [{
							icon: 'fas fa-running',
							onclick: 'translate'
						}],

					}, {
						icon: 'fas fa-running',
						type: 'button',
						color: 'danger',
						class: 'btn-block btn-lg',
						title: 'GO !',
						onclick: 'dosomething',
						tip: 'Tip Please verify your info before',
						help: 'Help Please verify your info before',
					},
					{
						icon: 'fas fa-running',
						type: 'range',
						label: 'Zoom',
						tip: 'select the right zoom',
						help: 'select the right zoom',
						onclick: 'alert("zoom")'
					},

					{
						id: 'i1',
						type: 'text',
                        required:true,
						size: 10,
						value: 'First item',
						label: 'Id de l\'ambulance',
						icon: 'fas fa-ambulance',
                        minlength:4,
						buttons: [{
							icon: 'fas fa-running',
							onclick: 'dosomething'
						}, {
							title: 'do it',
							onclick: 'dosomething'
						}],
						tip: 'Il faut bien écrire vous avez affaire avec un président',
						help: 'Help Please verify your info before',
					},
					{
						id: 'i0',
						type: 'row',
						desc: [{
								id: 'i11',
								type: 'email',
								size: 10,
								value: 'First item',
								label: 'Id de l\'ambulance',
								buttons: [{
									icon: 'fas fa-running',
									onclick: 'dosomething'
								}, {
									title: 'test',
									onclick: 'dosomething'
								}]
							},
							{
								id: 'i12',
								type: 'password',
                                pattern:'(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).{8,}',
                                required:true,
								value: 'Second item',
								label: 'Mot de passe'
							},
						]
					},
					{
						id: 'password',
						type: 'password',
						pattern:'(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).{8,}',
                        required:true,
						value: 'Second item',
						label: 'Mot de passe',
						buttons: [{
							icon: 'fas fa-running',
							onclick: 'dosomething'
						}, {
							title: 'Do it',
							onclick: 'dosomething'
						}],
						tip: 'Tip Please verify your info before',
						help: 'Help Please verify your info before',
					},
					{
						id: 'i3',
						type: 'datetime',
						size: 10,
						value: 'Third item',
						label: 'date',
						buttons: [{
							icon: 'fas fa-running',
							onclick: 'dosomething'
						}, {
							title: 'Do it',
							onclick: 'dosomething'
						}],
						tip: 'Tip Please verify your info before',
						help: 'Help Please verify your info before',
					},
					{
						id: 'i4',
						type: 'button',
						size: 23,
						title: 'Fourth item',
						icon: 'fas fa-restroom',
						onclick: 'dosomething'
					},
					{
						id: 'radioTest',
						type: 'radio',
						label: 'Choix animal',
						options: [{
								label: 'chien',
								id: 'dog',
								tip: 'Il faut bien écrire vous avez affaire avec un président'
							},
							{
								label: 'chat',
								id: 'cat',
								help: 'Help Please verify your info before'
							}
						]
					},
					{
						id: 'checkboxTest',
						type: 'checkbox',
						label: 'Choix animal',
						options: [{
								label: 'Oiseau',
								id: 'bird',
								help: 'Il faut bien écrire vous avez affaire avec un président'
							},
							{
								label: 'Serpent',
								id: 'snake',
								tip: 'ça pique'
							}
						]
					},
					{
						id: 'switchTest',
						type: 'switch',
						label: 'Choix animal',
						options: [{
								label: 'Oiseau',
								id: 'bird',
								help: 'Il faut bien écrire vous avez affaire avec un président'
							},
							{
								label: 'Serpent',
								id: 'snake',
								tip: 'ça pique'
							}
						]
					},
					{
						type: 'hr',
						icon: 'fas fa-plane',
						label: 'Take your plane',
						help: 'Please verify your info before'
					},
					{
						id: 'i9',
						type: 'select',
						label: 'Genre',
						tip: 'Tip Please verify your info before',
						help: 'Help Please verify your info before',
						options: [{
								label: 'Garcon',
								value: 'boy'
							},
							{
								label: 'Fille',
								value: 'girl'
							}
						]
					},
					{
						id: 'i10',
						type: 'multiselect',
						label: 'Musique',
						tip: 'Tip Please verify your info before',
						help: 'Help Please verify your info before',
						options: [{
								label: 'Garcon',
								value: 'boy'
							},
							{
								label: 'Fille',
								value: 'girl'
							}
						]
					},
					{
						id: 'i18',
						type: 'text',
						size: 10,
						value: 'First item',
						label: 'Id de l\'ambulance',
						icon: 'fas fa-ambulance',
						buttons: [{
							icon: 'fas fa-cogs',
							onclick: 'dosomething'
						}, {
							title: 'Test',
							onclick: 'dosomething'
						}],
						multilang: false,
						tip: 'Tip Please verify your info before',
						help: 'Help Please verify your info before',
					},
					{
						id: 'logon',
						type: 'text',
						size: 10,
						value: 'First item',
						label: 'Id de l\'ambulance',
						buttons: [{
							icon: 'fas fa-cogs',
							onclick: 'translate'
						}, {
							title: 'test',
							onclick: 'dosomething'
						}],
						multilang: true,
						tip: 'Tip Please verify your info before',
						help: 'Help Please verify your info before',
					}



				]
			},
			form2: {
				attr: {
					lang: 'fr',
					langs: ['fr', 'en']
				},
				desc: [{
						type: 'title',
						title: 'Bye !',
						icon: 'fas fa-radiation-alt'
					},
					{
						id: 'logon',
						type: 'text',
						size: 10,
						value: 'First item',
						label: 'Id de l\'ambulance',
						buttons: [{
							icon: 'fas fa-cogs',
							title: '',
							onclick: 'dosomething'
						}, {
							title: 'test',
							onclick: 'dosomething'
						}],
						multilang: false
					}
				]
			}
		}
	</script>

	<div class="container">
		<formr id="form1"></formr>
		<formr id="form2"></formr>
	</div>


	<script src="https://kit.fontawesome.com/14194217cb.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/riot@4/riot+compiler.min.js"></script>
	<script type="riot" src="formr.html"></script>
	<script type="riot" src="ihr.html"></script>
	<script type="riot" src="ialert.html"></script>
	<script type="riot" src="itext.html"></script>
	<script type="riot" src="ipassword.html"></script>
	<script type="riot" src="ibutton.html"></script>
	<script type="riot" src="jlabel.html"></script>
	<script type="riot" src="jicon.html"></script>
	<script type="riot" src="icheckbox.html"></script>
	<script type="riot" src="iradio.html"></script>
	<script type="riot" src="irange.html"></script>
	<script type="riot" src="jaddon.html"></script>
	<script type="riot" src="iselect.html"></script>
	<script type="riot" src="imultiselect.html"></script>
	<script type="riot" src="irow.html"></script>
	<script type="riot" src="ititle.html"></script>
	<script type="riot" src="jtooltip.html"></script>
	<script type="riot" src="jhelp.html"></script>
	<script type="text/javascript">
		riot.install(function(component) {
			component.i18n = function(id) {
				return id
			}
			component.langName = function(id) {
				const langs = {
					fr: 'français',
					en: 'English'
				}
				return langs[id] || id
			}
			component.selectIcon = function(field) {
				var ret, id = '',
					subType = '',
					type = ''
				if (field.icon && field.icon != 'none') return field.icon
				if (field.id) id = field.id.toLowerCase()
				if (field.type) type = field.type
				if (field.onclick && !type) type = 'button'
				let autoIcons = {
					tags: 'fas fa-tags',
					logon: 'fas fa-user',
					address: 'fas fa-map-marker-alt',
					name: 'fas fa-user',
					url: 'fas fa-user',
					lang: 'fas fa-language',
					google: 'fab fa-google',
					twitter: 'twitter',
					facebook: 'fab fa-facebook',
					datetimepicker: 'fas fa-calendar-alt',
					date: 'fas fa-calendar-alt',
					month: 'fas fa-calendar-alt',
					datetime: 'fas fa-calendar-alt',
					tel: 'fas fa-phone',
					mail: 'fas fa-envelope',
					email: 'fas fa-envelope',
					password: 'fas fa-key',
					number: 'fas fa-list-ol',
					button: 'fas fa-mouse-pointer'
				}
				for (var possibleId in autoIcons) {
					if (id.indexOf(possibleId) != -1 ||
						type.indexOf(possibleId) != -1
					) return autoIcons[possibleId]
				}
				if (!ret) ret = 'fas fa-greater-than';
				return ret
			}
			component.callType = function(type) {
				let types = {
					text: ['text','textarea', 'date', 'color', 'datetime', 'datetime-local', 'email', 'month', 'number', 'tel', 'time', 'url', 'week'],
					checkbox: ['checkbox', 'switch']
				}
				if (types.text.indexOf(type) > -1) return 'text'
				if (types.checkbox.indexOf(type) > -1) return 'checkbox'
				return type
			}
            component.translate=function(ev){
                elt=ev.target.closest(".input-group").querySelector(".form-control")
                defaultLang=elt.getAttribute('defaultLang')
                lang=elt.getAttribute('lang')
                eltFromId=elt.getAttribute('baseId')+'.'+defaultLang
                console.log(eltFromId,defaultLang,lang)
                eltFromValue=ev.target.closest(".form-group").querySelector('[name="'+eltFromId+'"]').value
                //console.log(ev.target.closest(".form-group").querySelector('[name="'+eltFromId+'"]').getAttribute('name'))
                elt.value='Transalion : ' + defaultLang + ' to ' + lang + ':' + eltFromValue
            }
		})





		riot.compile().then(() => {
			riot.mount('formr', {

			})
		})
	</script>

</body></html>
